C51 COMPILER V9.01   EXTERNAL_INTERRUPTS_LEVEL_TRIGGER                                     11/17/2017 09:53:46 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE EXTERNAL_INTERRUPTS_LEVEL_TRIGGER
OBJECT MODULE PLACED IN External_interrupts_level_trigger.OBJ
COMPILER INVOKED BY: D:\Keil_v4\C51\BIN\C51.EXE External_interrupts_level_trigger.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*
   2           *****************************************************************************************
   3           *      实 验 名 称:外部中断0的应用
   4           *  实 验 平 台：清翔电子 QX-MCS51开发板
   5           *      创 建 作 者：miki
   6           *  功 能 说 明：测试外部中断低电平触发方式的效果,主函数里数码管循环显示0-9，
   7           *                               当外部中断0低电平触发时（P3^2），进入中断服务函数让LED以500ms闪烁
   8           *  github 地 址：
   9           *      创 建 日 期：2017-11-14
  10           *****************************************************************************************
  11           */
  12          
  13          /************************************* 包含头文件 ***************************************/
  14          #include <reg52.h>
  15          
  16          
  17          /**************************************** 宏定义 *****************************************/
  18          #define uint unsigned int 
  19          #define uchar unsigned char
  20          
  21          //typedef unsigned int uint;
  22          //typedef unsigned char uchar;
  23          
  24          /*************************************** IO口定义 ****************************************/
  25          sbit DULA_IO = P2^6;
  26          sbit WELA_IO = P2^7;
  27          
  28          /************************************* 全局变量定义 **************************************/
  29          uchar code GlobalDisplayTable[] = 
  30                  {0x3f,0x06,0x5b,0x4f,0x66,
  31                   0x6d,0x7d,0x07,0x7f,0x6f};     /* 段选，选择要显示的数字 */
  32          
  33          /*************************************** 函数声明 ****************************************/
  34          void delayMs(uint xms);
  35          void externalInterrupt0Init(void);
  36          
  37          /*
  38           *****************************************************************************************
  39           * 函数名称：main
  40           * 函数功能：主函数，整个程序入口
  41           * 输入参数：无
  42           * 输出参数：无
  43           * 其他说明：无
  44           ******************************************************************************************
  45           */
  46          void main(void)
  47          {
  48   1              uchar num;
  49   1          externalInterrupt0Init();
  50   1              
  51   1          while (1)
  52   1          {
  53   2              for (num=0;num<10;num++)
  54   2              {
  55   3                      DULA_IO = 1;
C51 COMPILER V9.01   EXTERNAL_INTERRUPTS_LEVEL_TRIGGER                                     11/17/2017 09:53:46 PAGE 2   

  56   3                              P0 = GlobalDisplayTable[num];
  57   3                              DULA_IO = 0;
  58   3              
  59   3                              P0 = 0xff;
  60   3                              WELA_IO = 1;
  61   3              
  62   3                              P0 = 0x00;
  63   3                              WELA_IO = 0;
  64   3      
  65   3                              P1 = 0xff;
  66   3      
  67   3                              delayMs(1000);
  68   3              }
  69   2          }
  70   1      }
  71          
  72          /*
  73           *****************************************************************************************
  74           * 函数名称：externalInterrupt0Handler
  75           * 函数功能：外部中断0中断服务函数
  76           * 输入参数：无
  77           * 输出参数：无
  78           * 其他说明：无
  79           ******************************************************************************************
  80           */
  81          void externalInterrupt0Handler(void) interrupt 0
  82          {
  83   1          P1 = 0xff;
  84   1          delayMs(500);
  85   1          P1 = 0x00;
  86   1          delayMs(500); 
  87   1      }
  88          
  89          /*
  90           *****************************************************************************************
  91           * 函数名称：delayMs
  92           * 函数功能：实现毫秒级的延时
  93           * 输入参数：xms：需要延时时间
  94           * 输出参数：无
  95           * 其他说明：无
  96           ******************************************************************************************
  97           */
  98          void delayMs(uint xms)
  99          {
 100   1          uint x,y;
 101   1          for (x=xms;x>0;x--)
 102   1              for (y=114;y>0;y--);
 103   1      }
 104          
 105          /*
 106           *****************************************************************************************
 107           * 函数名称：externalInterrupt0Init
 108           * 函数功能：外部中断0中断初始化
 109           * 输入参数：无
 110           * 输出参数：无
 111           * 其他说明：无
 112           ******************************************************************************************
 113           */
 114          void externalInterrupt0Init(void)
 115          {
 116   1          EX0 = 1;   // 开启外部中断 0 ,P3.2选通
 117   1          IT0 = 0;   // 设置成电平触发（低电平）
C51 COMPILER V9.01   EXTERNAL_INTERRUPTS_LEVEL_TRIGGER                                     11/17/2017 09:53:46 PAGE 3   

 118   1          EA = 1;    // 开启总中断
 119   1      }
 120          
 121          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    162    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
