/*
 *****************************************************************************************
 *	文 件 名 称:timer.c
 *  创 建 平 台：Keil uVision4
 *	创 建 作 者：miki
 *  文 件 功 能：定时器初始化及其配置
 *  github 地 址：
 *	创 建 日 期：2017-11-18
 *****************************************************************************************
 */

/************************************* 包含头文件 ***************************************/
#include "timer.h"

/************************************* 全局变量定义 **************************************/
u8 GlobalInterruptAdd;

/*
 *****************************************************************************************
 * 函数名称：timer0InterruptInit
 * 函数功能：定时器0及其中断初始化
 * 输入参数：无
 * 输出参数：无
 * 其他说明：无
 ******************************************************************************************
 */
void timer0InterruptInit(void)
{	
	TMOD = 0x01;
	TH0 = (65536-46080)/256;
	TL0 = (65536-46080)%256;
	EA = 1;
	ET0 = 1;
	TCON = 0x10;
	 //TR0=1;
}

/*
 *****************************************************************************************
 * 函数名称：timer0InterruptHandler
 * 函数功能：定时器0中断服务函数
 * 输入参数：无
 * 输出参数：无
 * 其他说明：无
 ******************************************************************************************
 */
void timer0InterruptHandler() interrupt 1
{
	TH0=(65536-46080)/256;
	TL0=(65536-46080)%256;
	GlobalInterruptAdd ++;	
}

